{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-undef */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-param-reassign */\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { reset } from 'state-management/slices/authSlice';\nimport authService from 'services/authService';\nconst initialState = {\n  status: 'idle',\n  token: null,\n  user: {\n    username: null\n  }\n}; // Thunk functions\n\nexport const attemptAuth = createAsyncThunk('auth/attemptAuth', _s(async ({\n  username,\n  password,\n  twoFactorAuthToken\n}) => {\n  _s();\n\n  console.log(`[authSlice] attemptAuth: ${{\n    username,\n    password,\n    twoFactorAuthToken\n  }}`);\n  const dispatch = useDispatch();\n  const {\n    success,\n    error,\n    token,\n    _username\n  } = await authService.getAuthToken(username, password, twoFactorAuthToken);\n  console.log({\n    success,\n    error,\n    token,\n    username\n  });\n\n  if (success === false) {\n    console.log(`failed to login user ${error}`);\n    alert('failed to login user');\n    useDispatch(reset());\n  }\n\n  if (success === true) {\n    localStorage.setItem('X-Raya-Token', token);\n    alert('successfully logged in user');\n  }\n\n  return {\n    token,\n    _username\n  };\n}, \"tyTi/nQX1HrbQgGA5GKcImmUuh4=\", false, function () {\n  return [useDispatch, useDispatch];\n}));\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    reset: {\n      reducer(state, action) {\n        state = initialState;\n      }\n\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(attemptAuth.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(attemptAuth.fulfilled, (state, action) => {\n      console.log('state is fulfilled', action.payload);\n      const {\n        token,\n        username\n      } = action.payload;\n      state.token = token;\n      state.user.username = username;\n      state.status = 'idle';\n    });\n  }\n}); // const isAuthenticated = () => {\n// }\n// Action creators are generated for each case reducer function\n// export const {\n//   reset,\n// } = authSlice.actions;\n\nexport default authSlice.reducer;","map":{"version":3,"sources":["/Users/damianly/Desktop/Raya/Raya-React-DGDash/react-dg-dash/src/state-management/slices/authSlice.js"],"names":["createSlice","createAsyncThunk","useSelector","useDispatch","reset","authService","initialState","status","token","user","username","attemptAuth","password","twoFactorAuthToken","console","log","dispatch","success","error","_username","getAuthToken","alert","localStorage","setItem","authSlice","name","reducers","reducer","state","action","extraReducers","builder","addCase","pending","fulfilled","payload"],"mappings":"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","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\nimport {\n  createSlice,\n  createAsyncThunk,\n} from '@reduxjs/toolkit';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { reset } from 'state-management/slices/authSlice';\n\nimport authService from 'services/authService';\n\nconst initialState = {\n  status: 'idle',\n  token: null,\n  user: {\n    username: null,\n  },\n};\n\n// Thunk functions\nexport const attemptAuth = createAsyncThunk('auth/attemptAuth', async ({ username, password, twoFactorAuthToken }) => {\n  console.log(`[authSlice] attemptAuth: ${{ username, password, twoFactorAuthToken }}`);\n  const dispatch = useDispatch();\n  const {\n    success,\n    error,\n    token,\n    _username,\n  } = await authService.getAuthToken(username, password, twoFactorAuthToken);\n  console.log({\n    success, error, token, username,\n  });\n\n  if (success === false) {\n    console.log(`failed to login user ${error}`);\n    alert('failed to login user');\n    useDispatch(reset());\n  }\n  if (success === true) {\n    localStorage.setItem('X-Raya-Token', token);\n    alert('successfully logged in user');\n  }\n\n  return {\n    token,\n    _username,\n  };\n});\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    reset: {\n      reducer(state, action) {\n        state = initialState;\n      },\n    },\n  }, \n  extraReducers: (builder) => {\n    builder\n      .addCase(attemptAuth.pending, (state, action) => {\n        state.status = 'loading';\n      })\n      .addCase(attemptAuth.fulfilled, (state, action) => {\n        console.log('state is fulfilled', action.payload);\n        const {\n          token,\n          username,\n        } = action.payload;\n\n        state.token = token;\n        state.user.username = username;\n        state.status = 'idle';\n      });\n  },\n});\n\n// const isAuthenticated = () => {\n\n// }\n\n// Action creators are generated for each case reducer function\n// export const {\n//   reset,\n// } = authSlice.actions;\n\nexport default authSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}